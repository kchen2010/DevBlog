import{r as o,j as e,a as f,c as u,d as h,s as b,L as j,q as S,o as T,g as v}from"./index-C5QKlI5H.js";const k=()=>{const[r,a]=o.useState(""),[l,p]=o.useState(""),s=async c=>{c.preventDefault(),p("loading");try{await f(u(h,"subscribers"),{email:r,joinedAt:b()}),p("success"),a("")}catch(d){console.error("Error subscribing:",d),p("error")}};return e.jsxs("div",{className:"glass-panel",style:{textAlign:"center"},children:[e.jsx("h3",{style:{marginTop:0,color:"#c084fc"},children:"subscribe(updates)"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.9rem",marginBottom:"16px"},children:"// get notified when new posts drop"}),e.jsxs("form",{onSubmit:s,style:{display:"flex",gap:"10px",justifyContent:"center"},children:[e.jsx("input",{type:"email",placeholder:"email@example.com",value:r,onChange:c=>a(c.target.value),required:!0,style:{flex:1,maxWidth:"280px",marginBottom:0}}),e.jsx("button",{type:"submit",disabled:l==="loading",children:l==="loading"?"...":"Subscribe"})]}),l==="success"&&e.jsx("p",{style:{color:"#4ade80",fontSize:"0.9rem",marginBottom:0},children:"Subscribed successfully."}),l==="error"&&e.jsx("p",{style:{color:"#ef4444",fontSize:"0.9rem",marginBottom:0},children:"Something went wrong. Try again."})]})},w=r=>{const a=r.trim().split(/\s+/).length;return Math.max(1,Math.ceil(a/200))},C=r=>{const a=r.match(/!\[.*?\]\((.*?)\)/);return a?a[1]:null},z=()=>{const[r,a]=o.useState([]),[l,p]=o.useState(!0),[s,c]=o.useState(null),[d,y]=o.useState("");o.useEffect(()=>{(async()=>{try{const n=S(u(h,"posts"),T("Date","desc")),i=await v(n);a(i.docs.map(x=>({id:x.id,...x.data()})))}catch(n){console.error("Error fetching posts:",n)}finally{p(!1)}})()},[]);const g=o.useMemo(()=>{const t=new Set;return r.forEach(n=>{n.Tags&&n.Tags.forEach(i=>t.add(i))}),[...t]},[r]),m=o.useMemo(()=>r.filter(t=>{const n=!s||t.Tags&&t.Tags.includes(s),i=!d||t.Title.toLowerCase().includes(d.toLowerCase());return n&&i}),[r,s,d]);return l?e.jsx("h2",{style:{textAlign:"center",marginTop:"50px"},children:"Loading projects..."}):e.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"40px 20px"},children:[e.jsxs("header",{style:{marginBottom:"40px",textAlign:"center"},children:[e.jsxs("h1",{style:{fontSize:"2.5rem",marginBottom:"10px"},children:[e.jsx("span",{style:{color:"#c084fc"},children:"const"})," dev_projects = [];"]}),e.jsx("p",{style:{color:"#94a3b8"},children:"// Click a card to read the full log"})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx("input",{type:"text",placeholder:"search posts...",value:d,onChange:t=>y(t.target.value),style:{maxWidth:"400px",margin:"0 auto",display:"block"}})}),g.length>0&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"center",marginBottom:"30px"},children:[e.jsx("button",{onClick:()=>c(null),style:{fontSize:"0.8rem",padding:"4px 12px",border:s?"1px solid #334155":"1px solid #22d3ee",color:s?"#94a3b8":"#22d3ee",background:s?"transparent":"rgba(34, 211, 238, 0.1)"},children:"all"}),g.map(t=>e.jsxs("button",{onClick:()=>c(t===s?null:t),style:{fontSize:"0.8rem",padding:"4px 12px",border:s===t?"1px solid #22d3ee":"1px solid #334155",color:s===t?"#22d3ee":"#94a3b8",background:s===t?"rgba(34, 211, 238, 0.1)":"transparent"},children:["#",t]},t))]}),m.length===0?e.jsx("p",{style:{textAlign:"center",color:"#64748b",marginTop:"40px"},children:"// no posts found matching query"}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"25px"},children:m.map(t=>{const n=C(t.Content),i=w(t.Content);return e.jsx(j,{to:`/post/${t.id}`,style:{textDecoration:"none"},children:e.jsxs("div",{className:"glass-panel",style:{height:"100%",display:"flex",flexDirection:"column",padding:"0",overflow:"hidden"},children:[n?e.jsx("div",{style:{height:"180px",backgroundImage:`url(${n})`,backgroundSize:"cover",backgroundPosition:"center",borderBottom:"1px solid rgba(255,255,255,0.1)"}}):e.jsx("div",{style:{height:"100px",background:"linear-gradient(45deg, rgba(30,41,59,0), rgba(34,211,238,0.1))"}}),e.jsxs("div",{style:{padding:"20px",flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.4rem",color:"#e2e8f0"},children:t.Title}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"#64748b",marginBottom:"12px"},children:[i," min read"]}),e.jsx("div",{style:{marginTop:"auto"},children:t.Tags&&t.Tags.slice(0,3).map(x=>e.jsxs("span",{style:{fontSize:"0.75rem",color:"#94a3b8",marginRight:"8px",background:"rgba(255,255,255,0.05)",padding:"2px 6px",borderRadius:"4px"},children:["#",x]},x))})]})]})},t.id)})}),e.jsx("div",{style:{marginTop:"60px",maxWidth:"500px",marginLeft:"auto",marginRight:"auto"},children:e.jsx(k,{})})]})};export{z as default};
